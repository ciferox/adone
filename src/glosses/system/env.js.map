{"version":3,"sources":["env.js"],"names":["is","std","os","system","process","execStdout","adone","asNamespace","exports","wrap","key","lookup","fallback","val","windows","env","USERDOMAIN","USERNAME","USER","PROMPT","PS1","COMPUTERNAME","HOSTNAME","tmpdir","homedir","PATH","Path","path","split","EDITOR","VISUAL","ComSpec","SHELL"],"mappings":"AAAA,MAAM;AACFA,IADE;AAEFC,OAAK;AAAEC;AAAF,GAFH;AAGFC,UAAQ;AAAEC,aAAS;AAAEC;AAAF;AAAX;AAHN,IAIFC,KAJJ;AAMAA,MAAMC,WAAN,CAAkBC,OAAlB;;AAEA,MAAMC,OAAO,UAAUC,GAAV,EAAeC,MAAf,EAAuBC,QAAvB,EAAiC;AAC1CJ,UAAQE,GAAR,IAAe,YAAY;AACvB,QAAIG,MAAMF,QAAV;;AACA,QAAI,CAACE,GAAD,IAAQD,QAAZ,EAAsB;AAClBC,YAAM,MAAMR,WAAWO,QAAX,CAAZ;AACH;;AACD,WAAOC,GAAP;AACH,GAND;AAOH,CARD;;AAUAJ,KAAK,MAAL,EAAa,MAAOT,GAAGc,OAAH,GAAc,GAAEV,QAAQW,GAAR,CAAYC,UAAW,KAAIZ,QAAQW,GAAR,CAAYE,QAAS,EAAhE,GAAoEb,QAAQW,GAAR,CAAYG,IAApG,EAA2G,QAA3G;AACAT,KAAK,QAAL,EAAe,MAAMT,GAAGc,OAAH,GAAaV,QAAQW,GAAR,CAAYI,MAAzB,GAAkCf,QAAQW,GAAR,CAAYK,GAAnE;AACAX,KAAK,UAAL,EAAiB,MAAMT,GAAGc,OAAH,GAAaV,QAAQW,GAAR,CAAYM,YAAzB,GAAwCjB,QAAQW,GAAR,CAAYO,QAA3E,EAAqF,UAArF;AACAb,KAAK,QAAL,EAAe,MAAMP,GAAGqB,MAAH,EAArB;AACAd,KAAK,MAAL,EAAa,MAAMP,GAAGsB,OAAH,EAAnB;AACAf,KAAK,MAAL,EAAa,MAAM,CAACL,QAAQW,GAAR,CAAYU,IAAZ,IAAoBrB,QAAQW,GAAR,CAAYW,IAAhC,IAAwCtB,QAAQW,GAAR,CAAYY,IAArD,EAA2DC,KAA3D,CAAiE5B,GAAGc,OAAH,GAAa,GAAb,GAAmB,GAApF,CAAnB;AACAL,KAAK,QAAL,EAAe,MAAML,QAAQW,GAAR,CAAYc,MAAZ,IAAsBzB,QAAQW,GAAR,CAAYe,MAAlC,KAA6C9B,GAAGc,OAAH,GAAa,aAAb,GAA6B,IAA1E,CAArB;AACAL,KAAK,OAAL,EAAc,MAAMT,GAAGc,OAAH,GAAaV,QAAQW,GAAR,CAAYgB,OAAZ,IAAuB,KAApC,GAA4C3B,QAAQW,GAAR,CAAYiB,KAAZ,IAAqB,MAArF","file":"env.js","sourcesContent":["const {\n    is,\n    std: { os },\n    system: { process: { execStdout } }\n} = adone;\n\nadone.asNamespace(exports);\n\nconst wrap = function (key, lookup, fallback) {\n    exports[key] = async () => {\n        let val = lookup();\n        if (!val && fallback) {\n            val = await execStdout(fallback);\n        }\n        return val;\n    };\n};\n\nwrap(\"user\", () => (is.windows ? `${process.env.USERDOMAIN}\\\\${process.env.USERNAME}` : process.env.USER), \"whoami\");\nwrap(\"prompt\", () => is.windows ? process.env.PROMPT : process.env.PS1);\nwrap(\"hostname\", () => is.windows ? process.env.COMPUTERNAME : process.env.HOSTNAME, \"hostname\");\nwrap(\"tmpdir\", () => os.tmpdir());\nwrap(\"home\", () => os.homedir());\nwrap(\"path\", () => (process.env.PATH || process.env.Path || process.env.path).split(is.windows ? \";\" : \":\"));\nwrap(\"editor\", () => process.env.EDITOR || process.env.VISUAL || (is.windows ? \"notepad.exe\" : \"vi\"));\nwrap(\"shell\", () => is.windows ? process.env.ComSpec || \"cmd\" : process.env.SHELL || \"bash\");\n"],"sourceRoot":""}